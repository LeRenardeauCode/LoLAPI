name: CI - Build et VÃ©rification

# DÃ©clenche le workflow automatiquement
on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

# Les jobs Ã  exÃ©cuter
jobs:
  build:
    name: Build Application
    runs-on: ubuntu-latest

    steps:
    # 1. RÃ©cupÃ©rer le code du repo
    - name: ğŸ“¥ Checkout code
      uses: actions/checkout@v4

    # 2. Installer Node.js 18
    - name: ğŸ”§ Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '18'
        cache: 'npm'

    # 3. Installer les dÃ©pendances
    - name: ğŸ“¦ Install dependencies
      run: npm ci

    # 4. Builder l'application (vÃ©rifie qu'il n'y a pas d'erreurs)
    - name: ğŸ—ï¸ Build application
      run: npm run build

    # 5. VÃ©rifier que le dossier dist/ a Ã©tÃ© crÃ©Ã©
    - name: âœ… Verify build output
      run: |
        if [ -d "dist" ]; then
          echo "âœ… Build successful - dist/ folder created"
          ls -lh dist/
        else
          echo "âŒ Build failed - dist/ folder not found"
          exit 1
        fi
